/*!
 * MIT License
 *
 * Copyright (c) Yuri Sulyma
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.Liqvid=t(require("react")):e.Liqvid=t(e.React)}(self,(function(e){return(()=>{"use strict";var t={187:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==s&&e.removeListener("error",s),n([].slice.call(arguments))}var s;"error"!==t&&(s=function(n){e.removeListener(t,i),r(n)},e.once("error",s)),e.once(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,s,a,u;if(o(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),void 0===a)a=s[t]=n,++e._eventsCount;else if("function"==typeof a?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=m(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return o(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,s,a;if(o(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},985:(e,t,n)=>{n.r(t),n.d(t,{Audio:()=>xe,Controls:()=>Ue,IdMap:()=>_e,KeyMap:()=>A,Playback:()=>Pe,Player:()=>Ee,Script:()=>Se,Utils:()=>d,Video:()=>Ve,useMarkerUpdate:()=>T,usePlayer:()=>C,useTimeUpdate:()=>M});var r={};n.r(r),n.d(r,{awaitMediaCanPlay:()=>m,awaitMediaCanPlayThrough:()=>f});var i={};n.r(i),n.d(i,{between:()=>E,bind:()=>b,constrain:()=>k,range:()=>g,wait:()=>v,waitFor:()=>y});var s={};n.r(s),n.d(s,{formatTime:()=>D,formatTimeMs:()=>B,parseTime:()=>j,timeRegexp:()=>F});var a={};n.r(a),n.d(a,{captureRef:()=>I,recursiveMap:()=>H,useForceUpdate:()=>z});var o={};n.r(o),n.d(o,{dragHelper:()=>K,dragHelperReact:()=>X});var c={};n.r(c),n.d(c,{anyHover:()=>q,attachClickHandler:()=>$,onClick:()=>Y});var u={};n.r(u),n.d(u,{animate:()=>Oe,replay:()=>Ne});var l={};n.r(l),n.d(l,{during:()=>Ae,from:()=>Fe,showIf:()=>Re});var h={};n.r(h),n.d(h,{concat:()=>je,length:()=>De});var d={};n.r(d),n.d(d,{animation:()=>u,authoring:()=>l,interactivity:()=>o,media:()=>r,misc:()=>i,mobile:()=>c,react:()=>a,replayData:()=>h,time:()=>s});var p=n(888);function m(e){return new Promise((t=>{if(e.readyState===e.HAVE_FUTURE_DATA)return t();e.addEventListener("canplay",(()=>t()))}))}function f(e){return new Promise((t=>{if(e.readyState===e.HAVE_ENOUGH_DATA)return t();e.addEventListener("canplaythrough",(()=>t()))}))}function b(e,t){for(const n of t)e[n]=e[n].bind(e)}function v(e){return new Promise((t=>{setTimeout(t,e)}))}function y(e,t=10){return new Promise((n=>{const r=()=>{e()?n():setTimeout(r,t)};r()}))}function g(e,t){return void 0===t?g(0,e):new Array(t-e).fill(null).map(((t,n)=>e+n))}function k(e,t,n){return Math.min(n,Math.max(e,t))}function E(e,t,n){return e<=t&&t<n}var w=n(187);function T(e,t){const{script:n}=(0,p.useContext)(Ee.Context);(0,p.useEffect)((()=>(n.hub.on("markerupdate",e),()=>{n.hub.off("markerupdate",e)})),t)}function C(){return(0,p.useContext)(Ee.Context)}function M(e,t){const{playback:n}=(0,p.useContext)(Ee.Context);(0,p.useEffect)((()=>(n.hub.on("seek",e),n.hub.on("timeupdate",e),()=>{n.hub.off("seek",e),n.hub.off("timeupdate",e)})),t)}const{useEffect:x,useRef:_}=p;function P(){const{playback:e}=C(),t=_();return x((()=>{e.hub.on("cuechange",(()=>{t.current.innerHTML="";for(const n of e.captions)t.current.appendChild(n)}))}),[]),p.createElement("div",{className:"rp-captions-display",ref:t})}const L={Control:"Ctrl",Alt:"Alt",Shift:"Shift",Meta:"Meta"},S=["AltGraph","CapsLock","FnLock","NumLock","ScrollLock","SymbolLock","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","PageDown","PageUp","CrSel","EraseEof","ExSel","ContextMenu","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","LogOff","PowerOff","PrintScreen","WakeUp","AllCandidates","CodeInput","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","SingleCandidate","HangulMode","HanjaMode","JunjaMode","HiraganaKatakana","KanaMode","KanjiMode","ZenkakuHanaku","AppSwitch","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","MannerMode","VoiceDial","ChannelDown","ChannelUp","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","AudioBalanceLeft","AudioBalanceRight","AudioBassDown","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioBassUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeMute","AudioVolumeUp","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeMute","MicrophoneVolumeUp","TV","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ClosedCaptionToggle","DisplaySwap","DVR","GuideNextDay","GuidePreviousDay","InstantReplay","ListProgram","LiveContent","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","SplitScreenToggle","STBInput","STBPower","VideoModeNext","ZoomToggle","SpeechCorrectionList","SpeechInputToggle","SpellCheck","MailForward","MailReply","MailSend","LaunchCalculator","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchMyComputer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop"],O={};for(const Ie of S)O[Ie.toLowerCase()]=Ie;const N=Object.keys(L).map((e=>L[e])),R=["Backspace","Enter","Space","Tab"];class A{constructor(){this.bindings={}}static identify(e){const t=[];for(const n in L)e.getModifierState(n)&&t.push(L[n]);return e.key in L||(e.code.startsWith("Digit")?t.push(e.code.slice(5)):e.code.startsWith("Key")?t.push(e.code.slice(3)):R.includes(e.code)?t.push(e.code):t.push(e.key)),t.join("+")}static normalize(e){return e.split("+").map((e=>{const t=e.toLowerCase();return""===e?"":O[t]?O[t]:e[0].toUpperCase()+t.slice(1)})).sort(((e,t)=>N.includes(e)?N.includes(t)?N.indexOf(e)-N.indexOf(t):-1:N.includes(t)?1:function(e,t){if(e<t)return-1;if(e===t)return 0;return 1}(e,t))).join("+")}bind(e,t){if(e.indexOf(",")>-1)for(const n of e.split(","))this.bind(n,t);else e=A.normalize(e),this.bindings.hasOwnProperty(e)||(this.bindings[e]=[]),this.bindings[e].push(t)}unbind(e,t){var n;if(e.indexOf(",")>-1){for(const n of e.split(","))this.unbind(n,t);return}if(e=A.normalize(e),!this.bindings.hasOwnProperty(e))throw new Error(`${e} is not bound`);const r=this.bindings[e].indexOf(t);if(r<0)throw new Error(`${e} is not bound to ${null!==(n=t.name)&&void 0!==n?n:"callback"}`);this.bindings[e].splice(r,1),0===this.bindings[e].length&&delete this.bindings[e]}getKeys(){return Object.keys(this.bindings)}getHandlers(e){return this.bindings.hasOwnProperty(e)?this.bindings[e].slice():[]}handle(e){let t=!1;const n=A.identify(e);if(this.bindings[n]||this.bindings["*"]){if(t&&(e.preventDefault(),t=!0),this.bindings[n])for(const t of this.bindings[n])t(e);if(this.bindings["*"])for(const t of this.bindings["*"])t(e)}}}const F=/^(?:(?:(\d+):)?(\d+):)?(\d+)(?:\.(\d+))?$/;function j(e){const[t,n,r,i]=e.match(F).slice(1).map((e=>e||"0")),[s,a,o,c]=[t,n,r,i.padEnd(3,"0")].map((e=>parseInt(e,10)));return c+1e3*(o+60*(a+60*s))}function D(e){if(e<0)return"-"+D(-e);return`${Math.floor(e/60/1e3)}:${Math.floor(e/1e3%60).toString().padStart(2,"0")}`}function B(e){if(e<0)return"-"+B(-e);const t=Math.floor(e%1e3);return`${D(e)}.${t}`}const{useEffect:V}=p;function U(e){const t=C(),{playback:n}=t,{cols:r,rows:i,frequency:s,path:a,progress:o,show:c,title:u,height:l,width:h}=e,d=r*i;V((()=>{const e=Math.floor(n.duration/s/1e3),r=Math.floor(e/d);t.hub.on("canplay",(()=>{for(let e=0;e<=r;++e){(new Image).src=a.replace("%s",e.toString())}}))}),[]);const m=o*n.duration/1e3,f=Math.floor(m/s),b=Math.floor(f/d),v=f%d,y=Math.floor(v/i),g=v%i,k=a.replace("%s",b.toString());return p.createElement("div",{className:"rp-controls-thumbnail",style:{display:c?"block":"none",left:`calc(${100*o}%)`}},u&&p.createElement("span",{className:"rp-thumbnail-title"},u),p.createElement("div",{className:"rp-thumbnail-box"},p.createElement("img",{src:k,style:{left:`-${g*h}px`,top:`-${y*l}px`}}),p.createElement("span",{className:"rp-thumbnail-time"},D(1e3*m))))}const I=(e,t)=>n=>{null!==n&&e(n),null!==t&&("function"==typeof t?t(n):"object"==typeof t&&(t.current=n))};function z(){return p.useReducer((e=>!e),!1)[1]}function H(e,t){return p.Children.map(e,(e=>p.isValidElement(e)?("children"in e.props&&(e=p.cloneElement(e,{children:H(e.props.children,t)})),t(e)):e))}function K(e,t=(()=>{}),n=(()=>{})){return r=>{if(r instanceof MouseEvent||function(e){return"nativeEvent"in e&&e.nativeEvent instanceof MouseEvent}(r)){if(0!==r.button)return;let i=r.clientX,s=r.clientY;const a=e=>{const t=e.clientX-i,r=e.clientY-s;return document.body.removeEventListener("mousemove",o),window.removeEventListener("mouseup",a),n(e,{x:e.clientX,y:e.clientY,dx:t,dy:r})},o=t=>{const n=t.clientX-i,r=t.clientY-s;return i=t.clientX,s=t.clientY,e(t,{x:t.clientX,y:t.clientY,dx:n,dy:r})};return document.body.addEventListener("mousemove",o,{passive:!1}),window.addEventListener("mouseup",a,{passive:!1}),t(r,{x:i,y:s},a,o)}{r.preventDefault();const i=r.changedTouches,s=i[0].identifier;let a=i[0].clientX,o=i[0].clientY;const c=e=>{e.preventDefault();for(const t of Array.from(e.changedTouches)){if(t.identifier!==s)continue;const r=t.clientX-a,i=t.clientY-o;return window.removeEventListener("touchend",c,{capture:!1,passive:!1}),window.removeEventListener("touchcancel",c,{capture:!1,passive:!1}),window.removeEventListener("touchmove",u,{capture:!1,passive:!1}),n(e,{x:t.clientX,y:t.clientY,dx:r,dy:i})}},u=t=>{t.preventDefault();for(const n of Array.from(t.changedTouches)){if(n.identifier!==s)continue;const r=n.clientX-a,i=n.clientY-o;return a=n.clientX,o=n.clientY,e(t,{x:n.clientX,y:n.clientY,dx:r,dy:i})}};return window.addEventListener("touchend",c,{capture:!1,passive:!1}),window.addEventListener("touchcancel",c,{capture:!1,passive:!1}),window.addEventListener("touchmove",u,{capture:!1,passive:!1}),t(r,{x:a,y:o},c,u)}}}function X(e,t,n,r){const i=K(e,t,n);if(r){const e=I((e=>e.addEventListener("touchstart",i,{passive:!1})),r);return{onMouseDown:i,onMouseUp:Ee.preventCanvasClick,ref:e}}return{onMouseDown:i,onMouseUp:Ee.preventCanvasClick,onTouchStart:i}}const q=window.matchMedia("(any-hover: hover)").matches,Y=(e,t)=>{if(q)return{onClick:e};{let n,r;const i=e=>{"number"!=typeof n&&(r=e.currentTarget,n=e.changedTouches[0].identifier)},s=t=>{if("number"==typeof n)for(const i of Array.from(t.changedTouches))if(i.identifier===n){r.contains(document.elementFromPoint(i.clientX,i.clientY))&&e(t),n=void 0;break}};return{ref:I((e=>{e.addEventListener("touchstart",i,{passive:!1}),e.addEventListener("touchend",s,{passive:!1})}),t)}}},$=(e,t)=>{if(q)return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)};let n;const r=e=>{"number"!=typeof n&&(n=e.changedTouches[0].identifier)},i=r=>{if("number"==typeof n)for(const i of Array.from(r.changedTouches))i.identifier===n&&(e.contains(document.elementFromPoint(i.clientX,i.clientY))&&t(r),n=void 0)};return e.addEventListener("touchstart",r),e.addEventListener("touchend",i),()=>{e.removeEventListener("touchstart",r),e.removeEventListener("touchend",i)}};function G(e){const{keymap:t,playback:n,script:r}=C(),[i,s]=(0,p.useState)({scrubber:n.currentTime/n.duration,thumb:n.currentTime/n.duration}),[a,o]=(0,p.useState)(!1),c=(0,p.useRef)(),u=(0,p.useRef)(!1);u.current||(n.hub.on("seek",(()=>{if(n.seeking)return;const e=n.currentTime/n.duration;s({scrubber:e,thumb:e})})),n.hub.on("seeked",(()=>{const e=n.currentTime/n.duration;s((t=>({scrubber:e,thumb:t.thumb})))})),n.hub.on("timeupdate",(()=>{const e=n.currentTime/n.duration;s((t=>({scrubber:e,thumb:t.thumb})))})),t.bind("ArrowLeft",(()=>n.seek(n.currentTime-5e3))),t.bind("ArrowRight",(()=>n.seek(n.currentTime+5e3))),t.bind("J",(()=>n.seek(n.currentTime-1e4))),t.bind("L",(()=>n.seek(n.currentTime+1e4))),t.bind("W",(()=>r.back())),t.bind("E",(()=>r.forward())),t.bind("0,1,2,3,4,5,6,7,8,9",(e=>{const t=parseInt(e.key,10);isNaN(t)||n.seek(n.duration*t/10)})),u.current=!0);const l=(0,p.useMemo)((()=>q?{onMouseDown:K(((e,{x:t})=>{const r=c.current.getBoundingClientRect(),i=k(0,(t-r.left)/r.width,1);s({scrubber:i,thumb:i}),n.seek(i*n.duration)}),(e=>{n.seeking=!0;const t=c.current.getBoundingClientRect(),r=k(0,(e.clientX-t.left)/t.width,1);s({scrubber:r,thumb:r}),n.seek(r*n.duration)}),(()=>n.seeking=!1))}:{}),[]),h=(0,p.useMemo)((()=>{const e={};q&&Object.assign(e,{onMouseOver:()=>o(!0),onMouseMove:e=>{const t=c.current.getBoundingClientRect(),n=k(0,(e.clientX-t.left)/t.width,1);s((e=>({scrubber:e.scrubber,thumb:n})))},onMouseOut:()=>o(!1)});const t=K(((e,{x:t})=>{const n=c.current.getBoundingClientRect(),r=k(0,(t-n.left)/n.width,1);s({scrubber:r,thumb:r})}),(e=>{e.preventDefault(),e.stopPropagation(),n.seeking=!0,o(!0)}),((e,{x:t})=>{e.preventDefault();const r=c.current.getBoundingClientRect(),i=k(0,(t-r.left)/r.width,1);o(!1),n.seeking=!1,n.seek(i*n.duration)}));return e.ref=I((e=>{e.addEventListener("touchstart",t,{passive:!1})})),e}),[]),d=(0,p.useMemo)((()=>{const e=K(((e,{x:t})=>{const n=c.current.getBoundingClientRect(),r=k(0,(t-n.left)/n.width,1);s({scrubber:r,thumb:r})}),(e=>{e.preventDefault(),e.stopPropagation(),n.seeking=!0,o(!0)}),((e,{x:t})=>{e.preventDefault();const r=c.current.getBoundingClientRect(),i=k(0,(t-r.left)/r.width,1);o(!1),n.seeking=!1,n.seek(i*n.duration)}));return{ref:I((t=>{t.addEventListener("touchstart",e,{passive:!1})}))}}),[]),m=e.thumbs&&e.thumbs.highlights||[],f=m.find((e=>E(e.time/n.duration,i.thumb,e.time/n.duration+.01))),b=f?f.title:null;return p.createElement("div",Object.assign({className:"rp-controls-scrub",ref:c},l),e.thumbs&&p.createElement(U,Object.assign({},e.thumbs,{progress:i.thumb,show:a,title:b})),p.createElement("div",Object.assign({className:"rp-controls-scrub-wrap"},h),p.createElement("svg",{className:"rp-controls-scrub-progress",preserveAspectRatio:"none",viewBox:"0 0 100 10"},p.createElement("rect",{className:"rp-progress-elapsed",x:"0",y:"0",height:"10",width:100*i.scrubber}),p.createElement("rect",{className:"rp-progress-remaining",x:100*i.scrubber,y:"0",height:"10",width:100*(1-i.scrubber)}),m.map((({time:e})=>p.createElement("rect",{key:e,className:["rp-thumb-highlight"].concat(e<=n.currentTime?"past":[]).join(" "),x:e/n.duration*100,y:"0",width:"1",height:"10"})))),p.createElement("svg",Object.assign({className:"rp-scrubber",style:{left:`calc(${100*i.scrubber}% - 6px)`},viewBox:"0 0 100 100"},d),p.createElement("circle",{cx:"50",cy:"50",r:"50",stroke:"none"}))))}const{useCallback:W,useEffect:Z,useRef:J}=p;function Q(e){const t=C(),{keymap:n,playback:r}=t,[i,s]=p.useState(!0),a=J(0),o=W((()=>{r.paused||(void 0!==a.current&&clearTimeout(a.current),a.current=window.setTimeout((()=>s(!1)),3e3),s(!0))}),[]);Z((()=>{n.bind("*",o),document.body.addEventListener("touchstart",o),document.body.addEventListener("mousemove",o),r.hub.on("play",o),r.hub.on("pause",(()=>{clearTimeout(a.current),s(!0)})),r.hub.on("stop",(()=>{clearTimeout(a.current),s(!0)})),document.body.addEventListener("mouseleave",(()=>{t.playback.paused||s(!1)}))}),[]);const c=["rp-controls"];return i||c.push("hidden"),p.createElement("div",{className:c.join(" ")},p.createElement(G,{thumbs:e.thumbs}),p.createElement("div",{className:"rp-controls-buttons"},e.controls))}const ee=e=>e,te=["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"].map((e=>document[e])).concat(!1).find((e=>void 0!==e)),ne=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].map((e=>document.body[e])).concat((()=>{})).find(ee).bind(document.body),re=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].map((e=>document[e])).concat((async()=>{})).find(ee).bind(document);let ie=!1;const se=[],ae=te?ne:()=>{if(window.parent.postMessage({type:"fake-fullscreen",value:!0},location.origin),!ie){ie=!0;for(const e of se)e()}},oe=te?re:()=>{if(window.parent.postMessage({type:"fake-fullscreen",value:!1},location.origin),ie){ie=!1;for(const e of se)e()}},ce=te?()=>["fullscreen","webkitIsFullScreen","mozFullScreen"].map((e=>document[e])).find((e=>void 0!==e)):()=>ie,ue=te?function(e){for(const t of["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"])document.addEventListener(t,e)}:e=>{se.push(e)};function le(){const{keymap:e}=C(),t=z(),n=(0,p.useCallback)((()=>ce()?oe():ae()),[]);(0,p.useEffect)((()=>(ue(t),e.bind("F",n),()=>{e.unbind("F",n)})),[]);const r=(0,p.useMemo)((()=>Y(n)),[]);return p.createElement("svg",Object.assign({className:"rp-controls-fullscreen"},r,{viewBox:"0 0 36 36"}),ce()?p.createElement(p.Fragment,null,p.createElement("path",{fill:"white",d:"M 14 14 h -4 v 2 h 6 v -6 h -2 v 4 z"}),p.createElement("path",{fill:"white",d:"M 22 14 v -4 h -2 v 6 h 6 v -2 h -4 z"}),p.createElement("path",{fill:"white",d:"M 20 26 h 2 v -4 h 4 v -2 h -6 v 6 z"}),p.createElement("path",{fill:"white",d:"M 10 22 h 4 v 4 h 2 v -6 h -6 v 2 z"})):p.createElement(p.Fragment,null,p.createElement("path",{fill:"white",d:"M 10 16 h 2 v -4 h 4 v -2 h -6 v 6 z"}),p.createElement("path",{fill:"white",d:"M 20 10 v 2 h 4 v 4 h 2 v -6 h -6 z"}),p.createElement("path",{fill:"white",d:"M 24 24 h -4 v 2 h 6 v -6 h -2 v 4 z"}),p.createElement("path",{fill:"white",d:"M 12 20 h -2 v 6 h 6 v -2 h -4 v -4 z"})))}function he(){const{keymap:e,playback:t}=C(),n=z();(0,p.useEffect)((()=>{const r=["pause","play","seeking","seeked","stop"];for(const e of r)t.hub.on(e,n);const i=()=>t[t.paused?"play":"pause"]();return e.bind("K",i),e.bind("Space",i),()=>{for(const e of r)t.hub.off(e,n);e.unbind("K",i),e.unbind("Space",i)}}),[]);const r=(0,p.useRef)(),i=(0,p.useMemo)((()=>Y((()=>t.paused?t.play():t.pause()),r)),[]);return p.createElement("svg",Object.assign({className:"rp-controls-playpause",viewBox:"0 0 36 36"},i),t.paused||t.seeking?p.createElement("path",{d:"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z",fill:"white"}):p.createElement("path",{d:"M 12 26 h 4 v -16 h -4 z M 21 26 h 4 v -16 h -4 z",fill:"white"}))}const de=[.25,.5,.75,1,1.25,1.5,2];function pe(){const e=C(),{keymap:t,playback:n}=e,[r,i]=(0,p.useState)({main:!1,speed:!1}),[s,a]=(0,p.useState)(n.playbackRate);(0,p.useEffect)((()=>{n.hub.on("ratechange",(()=>a(n.playbackRate))),e.hub.on("canvasClick",(()=>i({main:!1,speed:!1}))),t.bind("Shift+<",(()=>n.playbackRate=de[Math.max(0,de.indexOf(n.playbackRate)-1)])),t.bind("Shift+>",(()=>n.playbackRate=de[Math.min(de.length-1,de.indexOf(n.playbackRate)+1)]))}),[]);const o=(0,p.useMemo)((()=>{const e={};for(const t of de)e[t]=Y((()=>{n.playbackRate=t,i({main:!0,speed:!1})}));return e}),[]),c=(0,p.useMemo)((()=>Y((()=>i((e=>({main:!(e.main||e.speed),speed:!1})))))),[]),u=Y((()=>i({main:!0,speed:!1}))),l=Y((()=>i({speed:!0,main:!1}))),h={display:r.main?"block":"none"},d={display:r.speed?"block":"none"};return p.createElement("div",{className:"rp-controls-settings"},p.createElement("div",{className:"rp-settings-speed-dialog",style:d},p.createElement("span",Object.assign({className:"rp-dialog-subtitle"},u),"< Speed"),p.createElement("ul",null,de.map((e=>p.createElement("li",Object.assign({className:e===s?"selected":"",key:e},o[e]),1===e?"Normal":e.toString()))))),p.createElement("div",{className:"rp-settings-dialog",style:h},p.createElement("table",null,p.createElement("tbody",null,p.createElement("tr",Object.assign({},l),p.createElement("th",{scope:"row"},"Speed"),p.createElement("td",null,1===s?"Normal":s," >"))))),p.createElement("svg",Object.assign({},c,{viewBox:"0 0 48 48"}),p.createElement("path",{fill:"#FFF",d:"m24.04 0.14285c-1.376 0-2.7263 0.12375-4.0386 0.34741l-0.64 6.7853c-1.3572 0.37831-2.6417 0.90728-3.8432 1.585l-5.244-4.3317c-2.2152 1.5679-4.1541 3.4955-5.7217 5.7101l4.3426 5.2437c-0.67695 1.2001-1.2177 2.4878-1.5959 3.8432l-6.7745 0.64053c-0.22379 1.3127-0.34741 2.6622-0.34741 4.0386 0 1.3788 0.12285 2.7238 0.34741 4.0386l6.7745 0.64056c0.37825 1.3554 0.91896 2.6431 1.5959 3.8432l-4.3317 5.2437c1.5648 2.2089 3.4908 4.1457 5.6997 5.7105l5.2545-4.3426c1.2023 0.67835 2.485 1.2174 3.8432 1.5959l0.64053 6.7853c1.3123 0.22368 2.6626 0.33658 4.0386 0.33658s2.7155-0.11289 4.0278-0.33658l0.64053-6.7853c1.3582-0.37847 2.6409-0.91755 3.8432-1.5959l5.2545 4.3426c2.2088-1.5649 4.1348-3.5017 5.6997-5.7105l-4.3317-5.2437c0.67695-1.2001 1.2177-2.4878 1.5959-3.8432l6.7744-0.64056c0.22456-1.3148 0.34741-2.6598 0.34741-4.0386 0-1.3765-0.12361-2.726-0.34741-4.0386l-6.7744-0.64053c-0.37825-1.3554-0.91896-2.6431-1.5959-3.8432l4.3426-5.2437c-1.568-2.2146-3.507-4.1422-5.722-5.7101l-5.2437 4.3317c-1.2015-0.67776-2.486-1.2067-3.8432-1.585l-0.641-6.7853c-1.3123-0.22366-2.6518-0.34741-4.0278-0.34741zm0 14.776c5.0178 0 9.076 4.0691 9.076 9.0869s-4.0582 9.0869-9.076 9.0869-9.0869-4.0691-9.0869-9.0869 4.0691-9.0869 9.0869-9.0869z"})))}function me(){const{playback:e}=C(),t=z();return p.useEffect((()=>(e.hub.on("durationchange",t),e.hub.on("seek",t),e.hub.on("timeupdate",t),()=>{e.hub.off("durationchange",t),e.hub.off("seek",t),e.hub.off("timeupdate",t)})),[]),p.createElement("span",{className:"rp-controls-time"},p.createElement("span",{className:"rp-current-time"},D(e.currentTime)),p.createElement("span",{className:"rp-time-separator"},"/"),p.createElement("span",{className:"rp-total-time"},D(e.duration)))}const{useCallback:fe,useEffect:be,useMemo:ve}=p;function ye(){const{keymap:e,playback:t}=C(),n=z();be((()=>{t.hub.on("volumechange",n),e.bind("ArrowUp",(()=>t.volume=t.volume+.05)),e.bind("ArrowDown",(()=>t.volume=t.volume-.05)),e.bind("M",(()=>t.muted=!t.muted))}),[]);const r=fe((e=>{t.volume=parseFloat(e.target.value)/100}),[]),i=ve((()=>Y((()=>t.muted=!t.muted))),[]);return p.createElement("div",{className:"rp-controls-volume"},p.createElement("svg",Object.assign({},i,{viewBox:"0 0 100 100"}),p.createElement("path",{d:"M 10 35 h 20 l 25 -20 v 65 l -25 -20 h -20 z",fill:"white",stroke:"none"}),t.muted?p.createElement("path",{d:"M 63 55 l 20 20 m 0 -20 l -20 20",stroke:"white",strokeWidth:"7"}):p.createElement("g",null,t.volume>0&&p.createElement("path",{d:"M 62 32.5 a 1,1 0 0,1 0,30",fill:"white",stroke:"none"}),t.volume>=.5&&p.createElement("path",{d:"M 62 15 a 1,1 0 0,1 0,65 v -10 a 10,10 0 0,0 0,-45 v -10 z",fill:"white",stroke:"none"}))),p.createElement("input",{min:"0",max:"100",onChange:r,type:"range",value:t.muted?0:100*t.volume}))}const ge=Symbol(),ke=Symbol();class Ee extends p.PureComponent{constructor(e){super(e),this.hub=new w.EventEmitter,this.__canPlayTasks=[],this.__canPlayThroughTasks=[],this.keymap=new A,this.captureKeys=!0,this.script=e.script,this.playback=this.script.playback,this.buffers=new Map,this.state={ready:!1},b(this,["onMouseUp","suspendKeyCapture","resumeKeyCapture","updateTree","reparseTree"])}componentDidMount(){document.body.addEventListener("keydown",(e=>{this.captureKeys&&document.activeElement===document.body&&this.keymap.handle(e)})),document.addEventListener("touchmove",(e=>{e[ge]||e.preventDefault()}),{passive:!1}),document.addEventListener("touchforcechange",(e=>e.preventDefault()),{passive:!1}),this.canPlay=Promise.all(this.__canPlayTasks),this.canPlay.then((()=>{this.hub.emit("canplay")})),this.canPlayThrough=Promise.all(this.__canPlayThroughTasks),this.canPlayThrough.then((()=>this.hub.emit("canplaythrough"))),this.dag=we(this.canvas,this.script.markerNumberOf),this.script.hub.on("markerupdate",this.updateTree),this.updateTree()}updateTree(){const{script:e}=this;function t(e){e.element.style.opacity="0",e.element.style["pointer-events"]="none",e.element.setAttribute("aria-hidden","true")}function n(e){return e.element.style.removeProperty("opacity"),e.element.style.removeProperty("pointer-events"),e.element.removeAttribute("aria-hidden"),e.children.forEach(r)}function r(i){return void 0===i.first?void 0!==i.during?e.markerName.startsWith(i.during)?n(i):t(i):i.children.forEach(r):i.first<=e.markerIndex&&(!i.last||e.markerIndex<i.last)?n(i):void t(i)}r(this.dag)}canvasClick(){this.hub.listeners("canvasClick").every((e=>{var t;return null===(t=e())||void 0===t||t}))&&(this.playback.paused?this.playback.play():this.playback.pause()),this.hub.emit("canvasClick")}onMouseUp(e){["a","area","button","input","option","select","textarea","video"].includes(e.target.nodeName.toLowerCase())||e.nativeEvent[ke]||this.canvasClick()}static allowScroll(e){("nativeEvent"in e?e.nativeEvent:e)[ge]=!0}static preventCanvasClick(e){("nativeEvent"in e?e.nativeEvent:e)[ke]=!0}suspendKeyCapture(){this.captureKeys=!1}resumeKeyCapture(){this.captureKeys=!0}ready(){}reparseTree(e){const[t,n]=function e(t,n){var r;if(!n.element.contains(t))return null;for(let i=0;i<n.children.length;++i)if(n.children[i].element.contains(t))return null!==(r=e(t,n.children[i]))&&void 0!==r?r:[n,i]}(e,this.dag);if(!t)throw new Error("Could not find node in tree");t.children[n].children=we(t.children[n].element,this.script.markerNumberOf).children,this.updateTree()}registerBuffer(e){this.buffers.set(e,[])}unregisterBuffer(e){this.buffers.delete(e)}updateBuffer(e,t){this.buffers.set(e,t),this.playback.hub.emit("bufferupdate")}obstruct(e,t){"canplay"===e?this.__canPlayTasks.push(t):this.__canPlayThroughTasks.push(t)}render(){const e={style:this.props.style},t=q?{onMouseUp:this.onMouseUp}:{};return p.createElement(Ee.Context.Provider,{value:this},p.createElement("div",Object.assign({className:["ractive-player"].join(" ")},e),p.createElement("div",Object.assign({className:"rp-canvas"},t,{ref:e=>this.canvas=e}),this.props.children),p.createElement(P,null),p.createElement(Q,{controls:this.props.controls,thumbs:this.props.thumbs})))}}function we(e,t){const n=Array.from(e.querySelectorAll("*[data-from-first], *[data-during]")),r={children:[],element:e},i=[r];for(const s of n){let e,n,r;s.dataset.fromFirst?(e=s.dataset.fromFirst,n=s.dataset.fromLast):s.dataset.during&&(r=s.dataset.during),s.style.opacity="0",s.style.pointerEvents="none";const a={children:[],element:s};r&&(a.during=r),e&&(a.first=t(e)),n&&(a.last=t(n));let o=i[i.length-1];for(;!o.element.contains(s);)i.pop(),o=i[i.length-1];o.children.push(a),i.push(a)}return r}Ee.Context=p.createContext(null),Ee.defaultControlsLeft=p.createElement(p.Fragment,null,p.createElement(he,null),p.createElement(ye,null),p.createElement(me,null)),Ee.defaultControlsRight=p.createElement(p.Fragment,null,p.createElement(pe,null),p.createElement(le,null)),Ee.defaultProps={controls:p.createElement(p.Fragment,null,Ee.defaultControlsLeft,p.createElement("div",{className:"rp-controls-right"},Ee.defaultControlsRight)),style:{}};class Te extends p.PureComponent{constructor(e,t){super(e,t),this.player=t,this.playback=t.playback,this.start=this.player.script.parseStart(this.props.start),b(this,["pause","play","onPlay","onRateChange","onSeek","onTimeUpdate","onVolumeChange","onDomPlay","onDomPause"])}componentDidMount(){this.playback.hub.on("pause",this.pause),this.playback.hub.on("play",this.onPlay),this.playback.hub.on("ratechange",this.onRateChange),this.playback.hub.on("seek",this.onSeek),this.playback.hub.on("seeking",this.pause),this.playback.hub.on("timeupdate",this.onTimeUpdate),this.playback.hub.on("volumechange",this.onVolumeChange),this.domElement.addEventListener("play",this.onDomPlay),this.domElement.addEventListener("pause",this.onDomPause),this.props.obstructCanPlay&&this.player.obstruct("canplay",m(this.domElement)),this.props.obstructCanPlayThrough&&this.player.obstruct("canplaythrough",f(this.domElement)),this.onVolumeChange();const e=()=>{const e=this.domElement.buffered,t=[];for(let n=0;n<e.length;++n)e.end(n)!==1/0&&t.push([1e3*e.start(n)+this.start,1e3*e.end(n)+this.start]);return t},t=()=>{this.player.updateBuffer(this.domElement,e())};this.player.registerBuffer(this.domElement),t(),this.domElement.addEventListener("progress",t)}componentWillUnmount(){this.playback.hub.off("pause",this.pause),this.playback.hub.off("play",this.onPlay),this.playback.hub.off("ratechange",this.onRateChange),this.playback.hub.off("seek",this.onSeek),this.playback.hub.off("seeking",this.pause),this.playback.hub.off("timeupdate",this.onTimeUpdate),this.playback.hub.off("volumechange",this.onVolumeChange),this.domElement.removeEventListener("pause",this.onDomPause),this.domElement.removeEventListener("play",this.onDomPlay),this.player.unregisterBuffer(this.domElement)}get end(){return this.start+1e3*this.domElement.duration}pause(){this.domElement.ended||this.domElement.pause()}play(){return this.domElement.play()}onPlay(){this.onTimeUpdate(this.playback.currentTime)}onRateChange(){this.domElement.playbackRate=this.playback.playbackRate}onSeek(e){E(this.start,e,this.end)?(this.domElement.currentTime=(e-this.start)/1e3,!this.domElement.paused||this.playback.paused||this.playback.seeking||this.play().catch(this.playback.pause)):this.domElement.paused||this.pause()}onTimeUpdate(e){if(E(this.start,e,this.end)){if(!this.domElement.paused||this.domElement.ended)return;this.domElement.currentTime=(e-this.start)/1e3,this.play().catch(this.playback.pause)}}onVolumeChange(){this.domElement.volume=this.playback.volume,this.domElement.muted=this.playback.muted}onDomPlay(){this.playback.paused?(this.playback.hub.off("play",this.onPlay),this.playback.play(),this.playback.hub.on("play",this.onPlay)):this.playback.currentTime>=this.end&&(this.domElement.pause(),this.domElement.currentTime=this.domElement.duration,this.playback.pause())}onDomPause(){!this.playback.seeking&&!this.playback.paused&&this.playback.currentTime<this.end&&(this.playback.hub.off("pause",this.pause),this.playback.pause(),this.playback.hub.on("pause",this.pause))}}function Ce(e){const t=document.createElement("template");return t.innerHTML=e,t.content.cloneNode(!0)}Te.defaultProps={obstructCanPlay:!1,obstructCanPlayThrough:!1},Te.contextType=Ee.Context;var Me=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class xe extends Te{componentDidMount(){super.componentDidMount();for(const e of Array.from(this.domElement.textTracks))e.addEventListener("cuechange",(()=>{const t=[];for(const n of Array.from(e.activeCues)){const e=n.text.replace(/\n/g,"<br/>");t.push(Ce(e))}this.playback.captions=t}))}render(){const e=this.props,{start:t,obstructCanPlay:n,obstructCanPlayThrough:r,children:i}=e,s=Me(e,["start","obstructCanPlay","obstructCanPlayThrough","children"]);return p.createElement("audio",Object.assign({preload:"auto",ref:e=>this.domElement=e},s),i)}}class _e extends p.PureComponent{constructor(e){super(e),b(this,["renderContent"]),this.foundIds=new Set}render(){return this.props.hasOwnProperty("map")?p.createElement(_e.Context.Provider,{value:[this.foundIds,this.props.map]},this.renderContent([this.foundIds,this.props.map])):p.createElement(_e.Context.Consumer,null,this.renderContent)}renderContent([e,t]){return H(this.props.children,(n=>{const r={};if(n.props.hasOwnProperty("id")){const{id:i}=n.props;e.add(i),void 0!==t[i]&&Object.assign(r,t[i])}return 0===Object.keys(r).length?n:p.cloneElement(n,r)}))}}_e.Context=p.createContext([]);class Pe{constructor(e){Object.assign(this,{currentTime:0,hub:new w.EventEmitter,duration:e.duration,playbackRate:1,playingFrom:0,startTime:performance.now(),__captions:[],__muted:!1,__playbackRate:1,paused:!0,__seeking:!1,__volume:1}),this.audioContext=new(window.AudioContext||webkitAudioContext),this.audioNode=this.audioContext.createGain(),this.audioNode.connect(this.audioContext.destination),this.hub.setMaxListeners(0),b(this,["pause","play","__advance"]),requestAnimationFrame(this.__advance)}get captions(){return this.__captions}set captions(e){this.__captions=e,this.hub.emit("cuechange")}get duration(){return this.__duration}set duration(e){e!==this.__duration&&(this.__duration=e,this.hub.emit("durationchange"))}get muted(){return this.__muted}set muted(e){e!==this.__muted&&(this.__muted=e,this.__muted?this.audioNode.gain.value=0:this.audioNode.gain.setValueAtTime(this.volume,this.audioContext.currentTime),this.hub.emit("volumechange"))}get playbackRate(){return this.__playbackRate}set playbackRate(e){e!==this.__playbackRate&&(this.__playbackRate=e,this.playingFrom=this.currentTime,this.startTime=performance.now(),this.hub.emit("ratechange"))}get seeking(){return this.__seeking}set seeking(e){e!==this.__seeking&&(this.__seeking=e,this.__seeking?this.hub.emit("seeking"):this.hub.emit("seeked"))}pause(){this.paused=!0,this.playingFrom=this.currentTime,this.hub.emit("pause")}play(){this.paused=!1,this.hub.emit("play")}seek(e){"string"==typeof e&&(e=j(e)),e=k(0,e,this.duration),this.currentTime=this.playingFrom=e,this.startTime=performance.now(),this.hub.emit("seek",e)}get volume(){return this.__volume}set volume(e){this.muted=!1;const t=this.__volume;this.__volume=k(0,e,1),0===t||0===this.__volume?this.audioNode.gain.setValueAtTime(0,this.audioContext.currentTime):this.audioNode.gain.exponentialRampToValueAtTime(this.__volume,this.audioContext.currentTime+2),this.hub.emit("volumechange")}stop(){this.paused=!0,this.playingFrom=0,this.hub.emit("stop")}__advance(e){this.paused||this.__seeking?this.startTime=e:(this.currentTime=this.playingFrom+Math.max((e-this.startTime)*this.__playbackRate,0),this.currentTime>=this.duration&&(this.currentTime=this.duration,this.stop()),this.hub.emit("timeupdate",this.currentTime)),requestAnimationFrame(this.__advance)}}function Le(e){return"string"==typeof e?j(e):e}class Se{constructor(e){this.hub=new w.EventEmitter,this.hub.setMaxListeners(0),b(this,["back","forward","markerByName","markerNumberOf","parseStart","parseEnd","__updateMarker"]);let t=0;for(const n of e){if(2===n.length){const[,e]=n;n[1]=t,n[2]=t+Le(e)}else{const[,e,t]=n;n[1]=Le(e),n[2]=Le(t)}t=n[2]}this.markers=e,this.markerIndex=0,this.playback=new Pe({duration:this.markers[this.markers.length-1][2]}),this.playback.hub.on("seek",this.__updateMarker),this.playback.hub.on("timeupdate",this.__updateMarker)}get markerName(){return this.markers[this.markerIndex][0]}back(){this.playback.seek(this.markers[Math.max(0,this.markerIndex-1)][1])}forward(){this.playback.seek(this.markers[Math.min(this.markers.length-1,this.markerIndex+1)][1])}markerByName(e){return this.markers[this.markerNumberOf(e)]}markerNumberOf(e){for(let t=0;t<this.markers.length;++t)if(this.markers[t][0]===e)return t;throw new Error(`Marker ${e} does not exist`)}parseStart(e){return"string"==typeof e?e.match(F)?j(e):this.markerByName(e)[1]:e}parseEnd(e){return"string"==typeof e?e.match(F)?j(e):this.markerByName(e)[2]:e}__updateMarker(e){let t;for(let n=0;n<this.markers.length;++n){const[,r,i]=this.markers[n];if(E(r,e,i)){t=n;break}}if(void 0===t&&(t=this.markers.length-1),t!==this.markerIndex){const e=this.markerIndex;this.markerIndex=t,this.hub.emit("markerupdate",e)}}}function Oe(e){"startValue"in e||(e.startValue=0),"endValue"in e||(e.endValue=1),"easing"in e||(e.easing=e=>e);const{startValue:t,endValue:n,startTime:r,duration:i,easing:s}=e;return e=>t+s(k(0,(e-r)/i,1))*(n-t)}function Ne({data:e,start:t,end:n,active:r,inactive:i,compressed:s}){void 0===s&&(s=!1);const a=e.map((e=>e[0]));if(s)for(let l=1;l<a.length;++l)a[l]+=a[l-1];void 0===t&&(t=0),void 0===n&&(n=t+a[a.length-1]);let o=0,c=0,u=!0;return function(s){if(s<t||s>=n)return u?(u=!1,i()):void 0;u=!0,s<o&&(c=0),o=s;let l=Math.min(c,a.length-1);for(;c<a.length&&t+a[c]<s;c++)l=c;const[,h]=e[l];r(h,l)}}function Re(e){return e?{}:{style:{opacity:0,pointerEvents:"none"}}}function Ae(e){return{"data-during":e}}function Fe(e,t){return{"data-from-first":e,"data-from-last":t}}function je(...e){const[t,...n]=e,r=[...t[0]];let i=t[1]+De(t[0]);for(const[s,a]of n){const e=s.slice();e[0][0]+=a-i,r.push(...e),i+=De(e)}return r}function De(e){return e.map((e=>e[0])).reduce(((e,t)=>e+t),0)}var Be=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Ve extends Te{render(){const e=this.props,{start:t,children:n,obstructCanPlay:r,obstructCanPlayThrough:i}=e,s=Be(e,["start","children","obstructCanPlay","obstructCanPlayThrough"]);return p.createElement("video",Object.assign({playsInline:!0,preload:"auto",ref:e=>this.domElement=e},s),n)}}const Ue={FullScreen:le,PlayPause:he,Settings:pe,TimeDisplay:me,Volume:ye};Object.defineProperty(window,"RactivePlayer",{get(){if(void 0!==window.Liqvid)return window.Liqvid}})},888:t=>{t.exports=e}},n={};function r(e){if(n[e])return n[e].exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(985)})()}));